import{m as Z,f as I,j as e,S as r,d as ee,p as te,t as oe,v as se,u as J,w as le,c as ae,r as v,x as q,l as ne,R as ie}from"./index-CpKiv_I1.js";import{u as re}from"./index-2D0SgV9Q.js";import{C as Q,R as V,b as W,a as ce,c as de,S as pe}from"./SmallShippingModal-DsmCgPlD.js";import{C as xe}from"./CommodityItem-DLhoSIjS.js";import{S as ue,a as ge,P as he}from"./PriceModal-Btu8g2r3.js";import{L as be}from"./Layout-C2CFlxvX.js";const $=Z(s=>({marketInfo:null,contactModalOpen:!1,privacyModalOpen:!1,refundModalOpen:!1,shippingModalOpen:!1,setMarketInfo:t=>s({marketInfo:t}),openContactModalOpen:()=>{s({contactModalOpen:!0}),window.document.body.style.overflow="hidden"},closeContactModalOpen:()=>{s({contactModalOpen:!1}),window.document.body.style.overflow="visible"},openPrivacyModalOpen:()=>{s({privacyModalOpen:!0}),window.document.body.style.overflow="hidden"},closePrivacyModalOpen:()=>{s({privacyModalOpen:!1}),window.document.body.style.overflow="visible"},openRefundModalOpen:()=>{s({refundModalOpen:!0}),window.document.body.style.overflow="hidden"},closeRefundModalOpen:()=>{s({refundModalOpen:!1}),window.document.body.style.overflow="visible"},openShippingModalOpen:()=>{s({shippingModalOpen:!0}),window.document.body.style.overflow="hidden"},closeShippingModalOpen:()=>{s({shippingModalOpen:!1}),window.document.body.style.overflow="visible"}})),me={page:1,query:"",tag:"All",sortBy:"",onSale:!1,inStock:!0,startPrice:0,endPrice:2e3,commodityList:[],sortByModalOpen:!1,priceModalOpen:!1,moreInfoModalOpen:!1,smallFilterModalOpen:!1},L={sortByModalOpen:!1,priceModalOpen:!1,moreInfoModalOpen:!1},f=Z(s=>({...me,addPage:()=>s(t=>({page:t.page+1})),setQuery:t=>s({query:t,page:1}),setTag:t=>s({tag:t,page:1}),setSortBy:t=>s({sortBy:t,page:1}),setStartPrice:t=>s({startPrice:t,page:1}),setEndPrice:t=>s({endPrice:t,page:1}),toggleOnSale:()=>s(t=>({onSale:!t.onSale,page:1})),toggleInStock:()=>s(t=>({inStock:!t.inStock,page:1})),setCommodityList:t=>s({commodityList:t}),toggleSortByModalOpen:()=>s(t=>({...L,sortByModalOpen:!t.sortByModalOpen})),togglePriceModalOpen:()=>s(t=>({...L,priceModalOpen:!t.priceModalOpen})),toggleMoreInfoModalOpen:()=>s(t=>({...L,moreInfoModalOpen:!t.moreInfoModalOpen})),closeAllModal:()=>s({...L}),toggleSmallFilterModal:()=>s(t=>({smallFilterModalOpen:!t.smallFilterModalOpen}))})),w=s=>{const{data:t,error:l}=re(`https://shop-backend-production-3600.up.railway.app/api/market/${s}`,I);return{data:t,error:l}},G=()=>{const s=new URLSearchParams(window.location.search).get("id")||"",{data:{data:t}={data:null},error:l}=w(s),{openContactModalOpen:a,openPrivacyModalOpen:n,openRefundModalOpen:c,openShippingModalOpen:p}=$(),{moreInfoModalOpen:d}=f();return l?null:e.jsxs("div",{className:`bg-white text-black rounded-xl absolute z-10 top-[calc(100%+5px)] left-0 p-2 text-nowrap min-w-max w-48
        border-[#0000001a] border-[0.5px] text-[16px] tracking-[0.15px] font-normal flex flex-col
        shadow-[0px_0px_16px_rgba(0,0,0,0.1)]
        ${d?"":"hidden"}
        `,children:[(t==null?void 0:t.privacyPolicy)&&t.privacyPolicy!==""&&e.jsxs("button",{type:"button",className:"flex flex-row items-center gap-2 p-3 rounded-xl duration-300 hover:bg-[#0000001a]",onClick:n,children:[e.jsx(r.PrivacyPolicy,{className:"size-5"}),e.jsx("p",{children:"Privacy policy"})]}),(t==null?void 0:t.refundPolicy)&&t.refundPolicy!==""&&e.jsxs("button",{type:"button",className:"flex flex-row items-center gap-2 p-3 rounded-xl duration-300 hover:bg-[#0000001a]",onClick:c,children:[e.jsx(r.RefundPolicy,{className:"size-5"}),e.jsx("p",{children:"Refund policy"})]}),(t==null?void 0:t.shippingPolicy)&&t.shippingPolicy!==""&&e.jsxs("button",{type:"button",className:"flex flex-row items-center gap-2 p-3 rounded-xl duration-300 hover:bg-[#0000001a]",onClick:p,children:[e.jsx(r.ShippingPolicy,{className:"size-5"}),e.jsx("p",{children:"Shipping policy"})]}),e.jsxs("button",{type:"button",className:"flex flex-row items-center gap-2 p-3 rounded-xl duration-300 hover:bg-[#0000001a]",onClick:a,children:[e.jsx(r.Contact,{className:"size-5"}),e.jsxs("p",{children:["Contact ",(t==null?void 0:t.name)||""]})]})]})},H=({data:s,modalOpen:t,closeModal:l})=>e.jsx("div",{className:`hidden md:block fixed left-0 top-0 w-screen h-screen z-50 bg-[#0006]
        ${t?"opacity-100 duration-300":"opacity-0 pointer-events-none"}`,onClick:a=>{a.stopPropagation(),l()},children:e.jsxs("div",{className:`w-[640px] max-w-full h-4/5  max-h-[600px] tracking-[.15px] bg-white rounded-3xl absolute left-1/2 top-1/2 -translate-x-1/2
            ${t?"scale-100 opacity-100 -translate-y-1/2":"scale-90 -translate-y-[40%] opacity-0"} duration-300 ease-[cubic-bezier(.16,1,.3,1)]`,onClick:a=>a.stopPropagation(),children:[e.jsx("h1",{className:"p-5 text-[20px] font-semibold text-center",children:"Privacy policy"}),(s==null?void 0:s.privacyPolicy)&&s.privacyPolicy!==""&&e.jsx("iframe",{src:s.privacyPolicy,className:"w-full h-[calc(100%-70px)] p-3 rounded-b-3xl"}),e.jsx("button",{type:"button",className:"absolute top-5 right-5",onClick:l,children:e.jsx(r.Close,{className:"size-6 text-[rgb(111,112,113)]"})})]})}),je=()=>{const{data:s,error:t}=ee(te()===""?null:"https://shop-backend-production-3600.up.railway.app/api/session/user/follow/id",oe);return(s==null?void 0:s.msg)==="Not auth"&&(s.data=[]),{data:s,error:t}},ye=()=>{se("https://shop-backend-production-3600.up.railway.app/api/session/user/follow/id")},B=({bgColor:s,textColor:t,isSmallCase:l})=>{const a=new URLSearchParams(window.location.search).get("id")||"",{data:{data:n}={data:[]}}=je(),{email:c,openSignInModal:p}=J(),d=n&&n.length>0&&n.includes(a),g=l?d?"transparent":"black":d?"transparent":s,j=l?d?"black":"white":d?t==="black"?"white":"black":t,o=l?d?"rgb(163 163 163)":"transparent":d?t==="black"?"rgba(245, 245, 245, 0.5)":"rgba(10, 10, 10, 0.5)":"transparent",m=()=>{if(c===""){p();return}fetch("https://shop-backend-production-3600.up.railway.app/api/session/user/follow",{method:d?"DELETE":"POST",headers:{authorization:"Bearer "+le(),contentType:"application/x-www-form-urlencoded"},body:new URLSearchParams("id="+a)}).then(h=>{if(h.status!==200)throw h.json();h.json()}).then(()=>{ye()}).catch(h=>{console.error(h)})};return e.jsx("button",{type:"button",className:`px-5 py-2 text-center rounded-[10px] border-[1px] font-medium duration-200 ${l?d?"hover:!bg-[#0000001a]":"hover:!bg-[rgb(42,42,42)]":d?t==="black"?"hover:!bg-[#ffffff1a]":"hover:!bg-[#0000001a]":t==="black"?"hover:!bg-[rgb(225,228,229)]":"hover:!bg-[rgb(42,42,42)]"}`,style:{backgroundColor:g,color:j,borderColor:o},onClick:m,children:d?"Following":"Follow"})},fe=()=>{var m,h;const{toggleMoreInfoModalOpen:s}=f(),{contactModalOpen:t,closeContactModalOpen:l,privacyModalOpen:a,closePrivacyModalOpen:n,refundModalOpen:c,closeRefundModalOpen:p,shippingModalOpen:d,closeShippingModalOpen:g}=$(),j=new URLSearchParams(window.location.search).get("id")||"",{data:{data:o}={data:null}}=w(j);return(!(o!=null&&o.bigLogo)||(o==null?void 0:o.bigLogo)==="")&&(!(o!=null&&o.bigPic)||(o==null?void 0:o.bigPic)==="")?e.jsxs("main",{className:"hidden md:block max-w-[1144px] mx-auto p-4 rounded-3xl items-center mt-8",children:[e.jsxs("div",{className:"max-w-[800px] flex flex-col gap-4 text-[14px]",children:[e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs("div",{className:"relative w-[56px] h-[56px] rounded-xl overflow-hidden",children:[(o==null?void 0:o.icon)&&o.icon!==""&&e.jsx("img",{src:o.icon,alt:"icon",className:"w-full h-full object-contain"}),e.jsx("div",{className:"absolute inset-0 bg-[#0000000a]"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold",children:(o==null?void 0:o.name)||""}),e.jsxs("p",{className:"cursor-pointer text-[12px] font-semibold",children:[(o==null?void 0:o.rating)||"","★(",(o==null?void 0:o.ratingAmount)||"",")"]})]})]}),e.jsx("p",{className:"tracking-[0.15px]",children:(o==null?void 0:o.description)||""}),e.jsxs("div",{className:"flex flex-row gap-2 items-center flex-wrap",children:[e.jsx(B,{bgColor:"black",textColor:"white",isSmallCase:!0}),e.jsxs("a",{className:"border-neutral-400 border-[1px] px-3 text-center py-2 rounded-[10px] font-semibold flex items-center gap-[2px] duration-200 hover:bg-[rgba(0,0,0,.1)]",href:(o==null?void 0:o.website)||"",target:"_blank",children:[e.jsx(r.Link,{className:"size-4 text-black"}),((m=o==null?void 0:o.website)==null?void 0:m.replace("https://","").replace("/",""))||""]}),e.jsxs("div",{className:"relative",onClick:i=>i.stopPropagation(),children:[e.jsx("button",{type:"button",className:"border-neutral-400 border-[1px] px-3 text-center py-2 font-extrabold rounded-xl duration-200 hover:bg-[rgba(0,0,0,.1)]",onClick:s,children:"···"}),e.jsx(G,{})]})]})]}),e.jsx(Q,{data:o,modalOpen:t,closeModal:l}),e.jsx(H,{data:o,modalOpen:a,closeModal:n}),e.jsx(V,{data:o,modalOpen:c,closeModal:p}),e.jsx(W,{data:o,modalOpen:d,closeModal:g})]}):e.jsxs("main",{className:"hidden md:block max-w-[1144px] mx-auto px-4 mt-4",children:[e.jsxs("div",{className:`pl-10 py-10 pr-8 grid ${o.bigPic===""?"grid-cols-[65fr_35fr]":"grid-cols-[45fr_55fr]"} items-center gap-10 rounded-[36px]`,style:{backgroundColor:(o==null?void 0:o.bigLogoBgColor)||"",color:(o==null?void 0:o.bigLogoFontColor)||""},children:[e.jsxs("div",{className:"flex flex-col gap-4 text-[14px]",children:[o!=null&&o.bigLogo&&(o==null?void 0:o.bigLogo)!==""?e.jsx("img",{src:o.bigLogo||"",alt:"logo",className:"max-h-20 min-h-xl max-w-40 object-contain object-left"}):(o==null?void 0:o.icon)&&o.icon!==""&&e.jsx("img",{src:o.icon,alt:"icon",className:"w-[56px] h-[56px] rounded-xl object-contain"}),e.jsxs("p",{className:"cursor-pointer text-[12px] font-semibold",children:[(o==null?void 0:o.rating)||"","★(",(o==null?void 0:o.ratingAmount)||"",")"]}),(o==null?void 0:o.description)&&o.description!==""&&e.jsx("p",{className:"tracking-[0.15px]",children:o.description}),e.jsxs("div",{className:"flex flex-row gap-3 flex-wrap",children:[e.jsx(B,{bgColor:o.bigLogoFontColor||"",textColor:o.bigLogoFontColor==="black"?"white":"black",isSmallCase:!1}),e.jsxs("a",{className:"relative border-[1px] px-3 text-center py-2 rounded-xl font-semibold flex items-center gap-[2px] group/link",href:(o==null?void 0:o.website)||"",target:"_blank",style:{borderColor:o.bigLogoFontColor==="black"?"rgb(10 10 10 / 0.5)":"rgb(245 245 245 / 0.5)"},children:[o.bigLogoFontColor==="black"?e.jsx(r.Link,{className:"size-4 text-black"}):e.jsx(r.Link,{className:"size-4 text-white"}),((h=o==null?void 0:o.website)==null?void 0:h.replace("https://","").replace("/",""))||"",e.jsx("div",{className:`absolute rounded-xl inset-0 ${o.bigLogoFontColor==="black"?"bg-[rgba(0,0,0,.08)]":"bg-[rgba(255,255,255,.08)]"} duration-200 opacity-0 group-hover/link:opacity-100`})]}),e.jsxs("div",{className:"relative",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"relative cursor-pointer group/link",children:[e.jsx("div",{onClick:s,className:"border-[1px] border-opacity-30 px-3 text-center rounded-xl py-2 duration-300 font-extrabold",style:{borderColor:o.bigLogoFontColor==="black"?"rgb(10 10 10 / 0.5)":"rgb(245 245 245 / 0.5)"},children:"···"}),e.jsx("div",{onClick:s,className:`absolute inset-0 rounded-xl ${o.bigLogoFontColor==="black"?"bg-[rgba(0,0,0,.08)]":"bg-[rgba(255,255,255,.08)]"} duration-200 opacity-0 group-hover/link:opacity-100`})]}),e.jsx(G,{})]})]})]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",children:(o==null?void 0:o.bigPic)&&o.bigPic!==""&&e.jsx("img",{src:o.bigPic,alt:"bigPic",className:"w-full h-[350px] object-cover"})})]}),e.jsx(Q,{data:o,modalOpen:t,closeModal:l}),e.jsx(H,{data:o,modalOpen:a,closeModal:n}),e.jsx(V,{data:o,modalOpen:c,closeModal:p}),e.jsx(W,{data:o,modalOpen:d,closeModal:g})]})},ve=()=>{const{commodityList:s}=f(),{userLikeList:t={msg:"",data:[]},error:l}=ae(),{handleClickLike:a}=J();return l?null:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 md:gap-4",children:s&&s.map(n=>{var c;return e.jsx(xe,{...n,image:n.images[0],checked:(c=t==null?void 0:t.data)==null?void 0:c.includes(n.id),handleClickLike:a},n.id)})})},we=()=>{const{setQuery:s}=f(),[t,l]=v.useState(""),a=new URLSearchParams(window.location.search).get("id")||"",{data:{data:n}={data:null}}=w(a);return e.jsx("div",{className:"relative flex md:hidden items-center  bg-neutral-100 rounded-xl py-3 px-4 transition-all duration-200",children:e.jsxs("form",{method:"GET",className:"flex-1 flex flex-row items-center gap-2",onSubmit:c=>{c.preventDefault(),t!==""&&s(t)},children:[e.jsx(r.Search,{className:"size-5 text-[rgb(111,112,113)]"}),e.jsx("input",{type:"search",autoComplete:"off",className:"relative w-full z-10 bg-transparent focus:outline-none",placeholder:`Search ${(n==null?void 0:n.name)||""}`,value:t,onChange:c=>l(c.target.value)})]})})},S={sortBy:"",onSale:!1,startPrice:0,endPrice:2e3,inStock:!0},Ne=()=>{var O;const{smallFilterModalOpen:s,toggleSmallFilterModal:t,setSortBy:l,setStartPrice:a,setEndPrice:n,toggleOnSale:c,toggleInStock:p,sortBy:d,startPrice:g,endPrice:j,onSale:o,inStock:m}=f(),h={sortBy:d,onSale:o,startPrice:g,endPrice:j,inStock:m},[i,M]=v.useState(h),[N,C]=v.useState(!1),[P,k]=v.useState(!1),y=x=>{M({...i,...x})},z=()=>{l(i.sortBy),a(i.startPrice),n(i.endPrice),i.inStock!==m&&p(),i.onSale!==o&&c()};return e.jsx("div",{className:`touch-none fixed z-50 inset-0 bg-[rgba(0,0,0,0.4)] text-[16px] text-nowrap font-medium duration-200 transform-gpu md:hidden ${s?"opacity-100":"opacity-0 pointer-events-none"} font-normal`,onClick:x=>{x.stopPropagation(),t()},children:e.jsxs("div",{className:`fixed bottom-4 left-4 right-4 bg-white px-4 rounded-3xl transform-gpu duration-200 ${s?"translate-y-0":"translate-y-full"}`,onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"py-6 flex items-center justify-between",children:[e.jsx("p",{className:"text-[18px] font-medium",children:"Filters"}),e.jsx("button",{type:"button",onClick:t,className:"relative left-[2px]",children:e.jsx(r.Close,{className:"size-6 text-[rgb(111,112,113)]"})})]}),e.jsxs("div",{className:"h-[70vh] flex flex-col justify-between",children:[e.jsxs("div",{className:"no-scrollbar overflow-auto flex flex-col",children:[e.jsxs("div",{className:"border-b-[1px] border-[rgb(238,240,241)]",children:[e.jsxs("div",{className:"py-4 flex flex-row items-center justify-between",onClick:()=>C(x=>!x),children:[e.jsx("span",{className:"text-[14px]",children:"Sort by"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-[12px] text-[rgb(111,112,113)]",children:((O=q.find(x=>x.value===i.sortBy))==null?void 0:O.textValue)||""}),e.jsx("button",{type:"button",children:N?e.jsx(r.Subtract,{className:"size-5"}):e.jsx(r.Add,{className:"size-5"})})]})]}),e.jsx("div",{className:`${N?"block":"hidden"} mt-2 mb-6`,children:q.map(x=>e.jsx(ue,{size:20,textValue:x.textValue,value:x.value,sortByFormControl:i.sortBy,setSortByFormControl:F=>{y({sortBy:F})}},x.textValue))})]}),e.jsxs("div",{className:"cursor-pointer py-4 flex flex-row items-center justify-between border-b-[1px] border-[rgb(238,240,241)]",onClick:()=>y({onSale:!i.onSale}),children:[e.jsx("span",{className:"text-[14px]",children:"On sale"}),e.jsx("button",{type:"button",className:`size-5 border-[1px] duration-200 ${i.onSale?"border-black":"border-[rgb(201,203,204)]"} rounded-[4px] overflow-hidden`,children:e.jsx(r.Tick,{className:`size-[18px] bg-black duration-200 ${i.onSale?"opacity-100":"opacity-0"}`})})]}),e.jsxs("div",{className:"border-b-[1px] border-[rgb(238,240,241)]",children:[e.jsxs("div",{className:"py-4 flex flex-row items-center justify-between",onClick:()=>k(x=>!x),children:[e.jsx("span",{className:"text-[14px]",children:"Price"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:`${i.startPrice!==S.startPrice||i.endPrice!==S.endPrice?"":"hidden"} text-[rgb(84,51,235)] text-[12px] font-medium`,onClick:x=>{x.stopPropagation(),y({startPrice:S.startPrice,endPrice:S.endPrice})},children:"Clear"}),e.jsx("button",{type:"button",children:P?e.jsx(r.Subtract,{className:"size-5"}):e.jsx(r.Add,{className:"size-5"})})]})]}),e.jsxs("div",{className:`${P?"block":"hidden"} my-6 grid grid-cols-[1fr_auto_1fr] items-center gap-2 text-[14px] tracking-[0.15px]`,children:[e.jsx("input",{type:"number",min:"0",max:"2000",step:"1",className:"w-full outline-none rounded-lg py-1 px-4 border-[1px] border-neutral-200 focus:border-purple-600 inputNumberNoArrow",value:i.startPrice,onChange:x=>{y({startPrice:Number(x.target.value)})}}),e.jsx("span",{className:"text-neutral-300",children:"-"}),e.jsx("input",{type:"number",min:"0",max:"2000",step:"1",className:"w-full outline-none rounded-lg py-1 px-4 border-[1px] border-neutral-200 focus:border-purple-600 inputNumberNoArrow",value:i.endPrice,onChange:x=>{y({endPrice:Number(x.target.value)})}})]})]}),e.jsxs("div",{className:"py-4 flex flex-row items-center justify-between border-b-[1px] border-[rgb(238,240,241)]",onClick:()=>y({inStock:!i.inStock}),children:[e.jsx("span",{className:"text-[14px]",children:"In stock"}),e.jsx("button",{type:"button",className:`size-5 border-[1px] duration-200 ${i.inStock?"border-black":"border-[rgb(201,203,204)]"} rounded-[4px] overflow-hidden`,children:e.jsx(r.Tick,{className:`size-[18px] bg-black duration-200 ${i.inStock?"opacity-100":"opacity-0"}`})})]})]}),e.jsxs("div",{className:"relative grid grid-cols-2 gap-2 text-center py-6 text-[16px]",children:[e.jsx("div",{className:"bg-neutral-100 duration-200 hover:bg-neutral-200 text-black py-3 rounded-[12px] cursor-pointer",onClick:()=>y(S),children:"Reset"}),e.jsx("div",{className:"bg-black duration-200 hover:bg-neutral-800 text-white py-3 rounded-[12px] cursor-pointer",onClick:()=>{z(),t()},children:"Done"})]})]})]})})},Me=()=>{var c;const s=new URLSearchParams(window.location.search).get("id")||"",{data:{data:t}={data:null}}=w(s),{tag:l,setTag:a,toggleSmallFilterModal:n}=f();return e.jsxs("div",{className:"relative flex md:hidden items-center justify-between",children:[(c=t==null?void 0:t.marketTag)!=null&&c.tags&&t.marketTag.tags.length>0?e.jsxs("div",{className:"overflow-auto no-scrollbar pr-12 flex items-center gap-4 text-[rgb(111_112_113)] text-[17px] tracking-[0.15px]",children:[e.jsx("p",{className:`${l==="All"?"text-black":""} flex-shrink-0 cursor-pointer duration-300 hover:text-black`,onClick:()=>a("All"),children:"All"}),t.marketTag.tags.map(p=>e.jsx("p",{className:`${l===p?"text-black":""} flex-shrink-0 cursor-pointer duration-300 hover:text-black`,onClick:()=>a(p),children:p},p))]}):e.jsx("h1",{className:"text-[18px] font-medium tracking-[0.15px]",children:"Products"}),e.jsx("button",{type:"button",className:"flex-shrink-0 size-8 rounded-[999px] border-[1px] border-[#0000001a] duration-200 hover:bg-[#0000001a] flex items-center justify-center",onClick:p=>{p.stopPropagation(),n()},children:e.jsx(r.Filter,{className:"size-4"})}),e.jsx("div",{className:"absolute top-0 right-8 w-20 h-full bg-[linear-gradient(to_right,rgba(255,255,255,0)_0%,rgb(255,255,255)_100%)]"}),e.jsx(Ne,{})]})},Pe=()=>{var E,U,D;const s=new URLSearchParams(window.location.search).get("id")||"",{data:{data:t}={data:null}}=w(s),{commodityList:l,setCommodityList:a,page:n,addPage:c,query:p,setQuery:d,tag:g,setTag:j,sortBy:o,setSortBy:m,onSale:h,inStock:i,startPrice:M,endPrice:N,sortByModalOpen:C,toggleSortByModalOpen:P,priceModalOpen:k,togglePriceModalOpen:y,toggleInStock:z,toggleOnSale:O,setStartPrice:x,setEndPrice:F}=f(),R=new URLSearchParams(window.location.search).get("id")||"",[K,A]=v.useState(!1),[X,_]=v.useState(0),[T,Y]=v.useState("");return v.useEffect(()=>{let b=!1;return fetch(`https://shop-backend-production-3600.up.railway.app/api/market/commodity?page=${n}&query=${p}&pageSize=10&marketId=${R}&sortBy=${o}&onSale=${h||""}&inStock=${i||""}&startPrice=${M}&endPrice=${N}&tag=${g}`).then(u=>u.json()).then(u=>{b||(n===1?(a((u==null?void 0:u.data)||[]),_((u==null?void 0:u.totalAmount)||0),A((u==null?void 0:u.hasMore)||!1)):(a([...l,...(u==null?void 0:u.data)||[]]),_((u==null?void 0:u.totalAmount)||0),A((u==null?void 0:u.hasMore)||!1)))}).catch(u=>console.log(u)),()=>{b=!0}},[n,R,o,h,i,M,N,g,p,a]),e.jsxs("div",{className:"max-w-[1144px] mx-auto px-4 flex flex-col gap-4 md:gap-8 mt-8 mb-10",children:[e.jsx("h1",{className:"hidden md:block text-[18px] md:text-[20px] font-semibold tracking-[0.15px]",children:"Products"}),((E=t==null?void 0:t.marketTag)==null?void 0:E.tags)&&((U=t==null?void 0:t.marketTag)==null?void 0:U.tags.length)>0&&e.jsxs("div",{className:"hidden md:flex items-center gap-6 text-[rgb(111_112_113)] text-[17px] tracking-[0.15px]",children:[e.jsx("p",{className:`${g==="All"?"text-black":""} cursor-pointer duration-300 hover:text-black`,onClick:()=>j("All"),children:"All"}),((D=t==null?void 0:t.marketTag)==null?void 0:D.tags)&&t.marketTag.tags.map(b=>e.jsx("p",{className:`${g===b?"text-black":""} cursor-pointer duration-300 hover:text-black`,onClick:()=>j(b),children:b},b))]}),e.jsxs("div",{className:"hidden md:flex items-center justify-between text-[12px]",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[12px]",children:[e.jsxs("div",{className:"relative",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:`flex items-center gap-2 cursor-pointer py-1.5 pr-2 pl-4 rounded-[8px] border-[1px] duration-200
                        ${C||o!==""?"bg-black text-white hover:bg-neutral-800 border-black":"bg-white text-black hover:bg-neutral-200 border-neutral-300"}`,onClick:P,children:["Sort by",e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"icon-down-chevron",stroke:"none",style:{width:"15px",height:"16px"},children:e.jsx("path",{d:"M18 9L12 15L6 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),e.jsx(ge,{setSortBy:m,modalOpen:C,toggleSortByModalOpen:P})]}),e.jsx("div",{className:`cursor-pointer py-1.5 px-4 rounded-[8px] border-[1px] duration-200
                    ${h?"bg-black text-white hover:bg-neutral-800 border-black":"bg-white text-black hover:bg-neutral-200 border-neutral-300"}`,onClick:O,children:"On sale"}),e.jsxs("div",{className:"relative",onClick:b=>{b.stopPropagation()},children:[e.jsxs("div",{className:`flex items-center gap-2 cursor-pointer py-1.5 pl-4 pr-2 rounded-[8px] border-[1px] duration-200
                        ${k||M!==0||N!==2e3?"bg-black text-white hover:bg-neutral-800 border-black":"bg-white text-black hover:bg-neutral-200 border-neutral-300"}`,onClick:y,children:["Price",e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"icon-down-chevron",stroke:"none",style:{width:"15px",height:"16px"},children:e.jsx("path",{d:"M18 9L12 15L6 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),e.jsx(he,{modalOpen:k,togglePriceModalOpen:y,setStartPrice:x,setEndPrice:F})]}),e.jsx("div",{className:`cursor-pointer py-1.5 px-4 rounded-[8px] border-[1px] duration-200
                    ${i?"bg-black text-white hover:bg-neutral-800 border-black":"bg-white text-black hover:bg-neutral-200 border-neutral-300"}`,onClick:z,children:"In-stock"}),e.jsxs("p",{className:"text-[rgb(111_112_113)]",children:[X," products"]})]}),e.jsxs("form",{className:"bg-neutral-100 flex items-center gap-1 py-3 pl-4 pr-6 rounded-xl",onSubmit:b=>{b.preventDefault(),d(T)},children:[e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"rgb(111 112 113)","data-testid":"icon-search",stroke:"none",style:{width:"20px",height:"20px"},children:e.jsx("path",{d:"M20 20L16.05 16.05M18 11C18 14.866 14.866 18 11 18C7.13401 18 4 14.866 4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),e.jsx("input",{type:"text",placeholder:`Search ${t==null?void 0:t.name}...`,className:"bg-transparent outline-none focus:outline-none text-[16px]",value:T,onChange:b=>{Y(b.target.value)}})]})]}),e.jsx(Me,{}),e.jsx(we,{}),e.jsx(ve,{}),K&&e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",className:"rounded-lg bg-neutral-100 py-2 px-3 text-[14px] font-semibold duration-200 hover:bg-neutral-200",onClick:c,children:"View more products"})})]})},Se=()=>{const s=new URLSearchParams(window.location.search).get("id")||"",{data:{data:t}={data:null}}=w(s),{openContactModalOpen:l,openPrivacyModalOpen:a,openRefundModalOpen:n,openShippingModalOpen:c}=$(),{moreInfoModalOpen:p,toggleMoreInfoModalOpen:d}=f();return e.jsx("div",{className:`touch-none fixed z-50 inset-0 bg-[rgba(0,0,0,0.4)] text-[16px] text-nowrap font-medium duration-200 transform-gpu md:hidden ${p?"opacity-100":"opacity-0 pointer-events-none"} font-normal`,onClick:g=>{g.stopPropagation(),d()},children:e.jsxs("div",{className:`fixed bottom-4 left-4 right-4 bg-white px-2 py-6 rounded-3xl transform-gpu duration-200 ${p?"translate-y-0":"translate-y-full"}`,onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"px-3 flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-row items-center gap-3",children:[(t==null?void 0:t.icon)&&t.icon!==""&&e.jsxs("div",{className:"relative size-11 rounded-xl overflow-hidden",children:[e.jsx("img",{src:t.icon,alt:"icon",className:"w-full h-full object-contain"}),e.jsx("div",{className:"absolute inset-0 bg-[#0000001a]"})]}),e.jsxs("div",{className:"font-semibold",children:[e.jsx("p",{children:(t==null?void 0:t.name)||""}),e.jsxs("div",{className:"flex flex-row items-center gap-[2px] text-[12px]",children:[e.jsx("span",{children:(t==null?void 0:t.rating)||""}),e.jsx(r.Star,{className:"size-3"}),e.jsxs("span",{children:["(",(t==null?void 0:t.ratingAmount)||"",")"]})]})]})]}),e.jsx("button",{type:"button",onClick:d,children:e.jsx(r.Close,{className:"size-5 text-[rgb(111_112_113)]"})})]}),e.jsx("p",{className:"text-[14px] font-normal px-3 py-4 text-wrap",children:(t==null?void 0:t.description)||""}),(t==null?void 0:t.website)&&t.website!==""&&e.jsxs("a",{className:"p-3 rounded-[10px] flex items-center gap-2 duration-200 hover:bg-[rgba(0,0,0,.1)]",href:t.website,target:"_blank",children:[e.jsx(r.Link,{className:"size-5"}),t.website.replace("https://","").replace("/","")]}),(t==null?void 0:t.privacyPolicy)&&t.privacyPolicy!==""&&e.jsxs("button",{type:"button",className:"w-full flex flex-row items-center gap-2 p-3 rounded-xl duration-300 hover:bg-[#0000001a]",onClick:a,children:[e.jsx(r.PrivacyPolicy,{className:"object-contain size-5"}),e.jsx("p",{children:"Privacy policy"})]}),(t==null?void 0:t.refundPolicy)&&t.refundPolicy!==""&&e.jsxs("button",{type:"button",className:"w-full flex flex-row items-center gap-2 p-3 rounded-xl duration-300 hover:bg-[#0000001a]",onClick:n,children:[e.jsx(r.RefundPolicy,{className:"object-contain size-5"}),e.jsx("p",{children:"Refund policy"})]}),(t==null?void 0:t.shippingPolicy)&&t.shippingPolicy!==""&&e.jsxs("button",{type:"button",className:"w-full flex flex-row items-center gap-2 p-3 rounded-xl duration-300 hover:bg-[#0000001a]",onClick:c,children:[e.jsx(r.ShippingPolicy,{className:"object-contain size-5"}),e.jsx("p",{children:"Shipping policy"})]}),e.jsxs("button",{type:"button",className:"w-full flex flex-row items-center gap-2 p-3 rounded-xl duration-300 hover:bg-[#0000001a]",onClick:l,children:[e.jsx(r.Contact,{className:"object-contain size-5"}),e.jsxs("p",{children:["Contact ",(t==null?void 0:t.name)||""]})]})]})})},Ce=({data:s,modalOpen:t,closeModal:l})=>e.jsx("div",{className:`md:hidden fixed inset-0 z-50 bg-white
        ${t?"opacity-100 duration-300":"opacity-0 pointer-events-none"}`,onClick:a=>{a.stopPropagation()},children:e.jsxs("div",{className:"p-5 flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-[18px] font-semibold text-center",children:"Privacy policy"}),e.jsx("button",{type:"button",onClick:l,children:e.jsx(r.Close,{className:"size-6 text-[rgb(111,112,113)]"})})]}),(s==null?void 0:s.privacyPolicy)&&s.privacyPolicy!==""&&e.jsx("iframe",{src:s.privacyPolicy,className:"w-full"})]})}),ke=()=>{const s=new URLSearchParams(window.location.search).get("id")||"",{data:{data:t}={data:null}}=w(s),{toggleMoreInfoModalOpen:l}=f(),{contactModalOpen:a,closeContactModalOpen:n,privacyModalOpen:c,closePrivacyModalOpen:p,refundModalOpen:d,closeRefundModalOpen:g,shippingModalOpen:j,closeShippingModalOpen:o}=$();return e.jsxs("div",{className:"md:hidden tracking-[0.15px] leading-[normal] font-[SuisseIntl-Medium,sans-serif]",children:[(t==null?void 0:t.bigPic)&&t.bigPic!==""&&e.jsxs("div",{className:"md:hidden relative h-[200px]",children:[e.jsx("img",{src:t.bigPic,alt:"bigPic",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-[#0006]"}),(t==null?void 0:t.bigLogo)&&t.bigLogo!==""&&e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[200px]",children:e.jsx("img",{src:t.bigLogo,alt:"icon",className:"w-full object-contain"})})]}),e.jsxs("div",{className:"m-4 mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-row items-center gap-3",children:[(!(t!=null&&t.bigPic)||t.bigPic==="")&&(t==null?void 0:t.icon)&&t.icon!==""&&e.jsxs("div",{className:"relative size-14 rounded-xl overflow-hidden",children:[e.jsx("img",{src:t.icon,alt:"icon",className:"w-full h-full object-contain"}),e.jsx("div",{className:"absolute inset-0 bg-[#0000001a]"})]}),e.jsxs("div",{className:"font-semibold",children:[e.jsx("p",{children:(t==null?void 0:t.name)||""}),e.jsxs("div",{className:"flex flex-row items-center gap-[2px] text-[12px]",children:[e.jsx("span",{children:(t==null?void 0:t.rating)||""}),e.jsx(r.Star,{className:"size-3"}),e.jsxs("span",{children:["(",(t==null?void 0:t.ratingAmount)||"",")"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{bgColor:"black",textColor:"white",isSmallCase:!0}),e.jsx("button",{type:"button",className:"size-7 duration-200 hover:bg-[#0000001a] rounded-[999px] flex items-center justify-center",onClick:m=>{m.stopPropagation(),l()},children:e.jsx(r.MoreInfo,{className:"size-5"})})]})]}),e.jsx("p",{className:"font-normal text-[14px] mt-4",children:(t==null?void 0:t.description)||""})]}),e.jsx(Se,{}),e.jsx(Ce,{data:t,modalOpen:c,closeModal:p}),e.jsx(ce,{data:t,modalOpen:d,closeModal:g}),e.jsx(de,{data:t,modalOpen:j,closeModal:o}),e.jsx(pe,{data:t,modalOpen:a,closeModal:n})]})},Oe=()=>{const s=new URLSearchParams(window.location.search).get("id")||"",{closeAllModal:t}=f();return v.useEffect(()=>(window.addEventListener("click",t),()=>{window.removeEventListener("click",t)}),[]),s===null?e.jsx("div",{className:"text-center text-5xl mt-8",children:"404 id not found"}):e.jsxs(be,{children:[e.jsx(fe,{}),e.jsx(ke,{}),e.jsx(Pe,{})]})};ne.createRoot(document.getElementById("root")).render(e.jsx(ie.StrictMode,{children:e.jsx(Oe,{})}));
