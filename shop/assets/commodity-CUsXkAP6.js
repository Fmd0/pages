import{m as Q,j as e,f as Y,r as g,S as $,c as Z,u as K,a as J,n as I,o as ee,l as te,R as se}from"./index-YHuk7Y9D.js";import{S as R}from"./StarList-BSylrtfa.js";import{u as re}from"./index-O5h_Fc7K.js";import{C as ne,S as ie,R as le,a as ae,b as oe,c as ce}from"./SmallShippingModal-CUl94h8o.js";import{C as de}from"./CommodityItem-CBGSlsHi.js";import{L as me}from"./Layout-B_U2D8MH.js";const xe={commodityInfo:null,commodityInfoImageLength:1,images:[],skuItemMap:{},bestSellingCommodities:[],comment:[],commentGroup:[],commentTotalAmount:1,commentHasMore:!1,commentPage:1,imageModalOpen:!1,imageIndex:0,skuItemKey:"",refundModalOpen:!1,shippingModalOpen:!1},V={moreInfoModalOpen:!1},b=Q(r=>({...xe,...V,contactModalOpen:!1,descriptionModalOpen:!1,commentModalOpen:!1,commentModalRowDisplay:!1,setCommodityInfo:s=>r({commodityInfo:s}),setCommodityInfoImageLength:s=>r({commodityInfoImageLength:s}),setImages:s=>r({images:s}),setSkuItemMap:s=>r({skuItemMap:s}),setBestSellingCommodities:s=>r({bestSellingCommodities:s}),setComment:s=>r({comment:s}),setCommentGroup:s=>r({commentGroup:s}),setCommentTotalAmount:s=>r({commentTotalAmount:s}),setCommentHasMore:s=>r({commentHasMore:s}),addCommentPage:()=>r(s=>({commentPage:s.commentPage+1})),setImageModalOpen:s=>{s?window.document.body.style.overflow="hidden":window.document.body.style.overflow="visible",r({imageModalOpen:s})},setImageIndex:s=>r({imageIndex:s}),setSkuItemKey:s=>r({skuItemKey:s}),toggleMoreInfoModalOpen:()=>r(s=>({...V,moreInfoModalOpen:!s.moreInfoModalOpen})),openContactModal:()=>{window.document.body.style.overflow="hidden",r({contactModalOpen:!0})},closeContactModal:()=>{window.document.body.style.overflow="visible",r({contactModalOpen:!1})},openDescriptionModal:()=>{window.document.body.style.overflow="hidden",r({descriptionModalOpen:!0})},closeDescriptionModal:()=>{window.document.body.style.overflow="visible",r({descriptionModalOpen:!1})},openCommentModal:()=>{window.document.body.style.overflow="hidden",r({commentModalOpen:!0})},closeCommentModal:()=>{window.document.body.style.overflow="visible",r({commentModalOpen:!1})},openRefundModal:()=>{window.document.body.style.overflow="hidden",r({refundModalOpen:!0})},closeRefundModal:()=>{window.document.body.style.overflow="visible",r({refundModalOpen:!1})},openShippingModal:()=>{window.document.body.style.overflow="hidden",r({shippingModalOpen:!0})},closeShippingModal:()=>{window.document.body.style.overflow="visible",r({shippingModalOpen:!1})},closeAllModal:()=>r({...V})})),H=r=>{const s=Intl.DateTimeFormat("en-US",{month:"long",day:"numeric"}).format(r),t=r.getFullYear();return t===new Date().getFullYear()?s:s+" "+t},he=()=>{const{commodityInfo:r,comment:s,openCommentModal:t}=b();return e.jsxs("div",{className:"hidden md:block mt-6 font-[SuisseIntl-Book,sans-serif] font-normal",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"text-[20px] mr-4",children:"Reviews"}),e.jsxs("div",{className:"cursor-pointer text-black flex items-center gap-1",children:[e.jsx(R,{size:20,rating:Number((r==null?void 0:r.rating)||0),gap:2}),e.jsxs("p",{className:"",children:[r==null?void 0:r.rating,e.jsxs("span",{className:"text-neutral-500 ml-1",children:["(",r==null?void 0:r.ratingAmount,")"]})]})]})]}),e.jsx("div",{className:"mt-5 grid grid-cols-2 gap-x-16 gap-y-8 mb-8",children:s.slice(0,4).map((n,l)=>e.jsxs("div",{children:[e.jsx(R,{size:16,rating:n.rating,gap:2}),e.jsxs("p",{className:"mt-1 text-[12px] text-[rgb(111_112_113)]",children:[n.userName," ·",H(new Date(n.createdAt))]}),e.jsx("p",{className:"mt-3 text-[14px] text-black",children:n.comment.length>150?n.comment.slice(0,150)+"...":n.comment})]},l))}),s.length>4&&e.jsx("div",{className:"cursor-pointer bg-[rgb(242_244_245)] duration-300 hover:bg-[rgb(225_228_229)] rounded-lg p-2 grid place-items-center",onClick:t,children:"Read more reviews"})]})},F=r=>{const{data:s,error:t}=re(`https://shop-backend-production-3600.up.railway.app/api/commodity/${r}`,Y);return{data:s,error:t}},pe=()=>{const r=new URLSearchParams(window.location.search).get("id")||"",{data:{data:{commodity:s}}={data:{commodity:null,bestSellingCommodities:[]}}}=F(r),{setImageModalOpen:t,imageIndex:n,setImageIndex:l,images:o}=b(),x=g.useRef(null),c=g.useRef(0),h=g.useRef(1),u=g.useRef(0),i=g.useRef(0),d=g.useRef(!1),v=g.useRef(!1),j=g.useRef(0),k=w=>{v.current=!1,d.current=!0,u.current=w.clientX,x.current&&(x.current.style.transitionDuration="0ms")},N=(()=>{let w=!1;return p=>{if(!(!d.current||w)&&(w=!0,setTimeout(()=>{w=!1},8),x.current)){const y=p.clientX-u.current;!v.current&&Math.abs(y)>3&&(v.current=!0),i.current>0||i.current<-(h.current-1)*c.current?i.current+=y/2:i.current+=y,window.cancelAnimationFrame(j.current),j.current=window.requestAnimationFrame(()=>{x.current&&(x.current.style.transform=`translate3d(${i.current}px, 0, 0)`)}),u.current=p.clientX}}})(),_=()=>{if(d.current&&(d.current=!1,x.current)){const w=(s==null?void 0:s.images.length)||0;let p=Math.round(-i.current/c.current);p=p<0?0:p,p=p>w-1?w-1:p,i.current=-p*c.current,l(p),x.current.style.transform=`translate3d(${i.current}px, 0, 0)`,x.current.style.transitionDuration="300ms"}},M=_;return g.useEffect(()=>{x.current&&(i.current=-n*c.current)},[n]),g.useEffect(()=>{x.current&&(c.current=x.current.offsetWidth)},[c.current]),g.useEffect(()=>(h.current=(s==null?void 0:s.images.length)||1,window.addEventListener("pointermove",N),window.addEventListener("pointerup",_),window.addEventListener("pointercancel",M),()=>{window.removeEventListener("pointermove",N),window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",M)}),[s]),e.jsxs("div",{children:[e.jsxs("div",{className:"relative cursor-zoom-in md:mb-4",onClick:()=>{v.current||t(!0)},children:[e.jsx("div",{className:"flex duration-300 touch-pan-y will-change-transform",style:{transform:`translate3d(-${n*100}%, 0, 0)`},ref:x,onPointerDown:k,children:o.length>0&&o.map((w,p)=>e.jsx("div",{className:"flex-shrink-0 w-full flex items-center justify-center",children:e.jsxs("div",{className:"relative w-full md:w-max mx-auto overflow-hidden md:rounded-2xl",children:[e.jsx("img",{className:"h-[65vh] w-full md:max-w-full object-cover",src:w,alt:"commodity"}),e.jsx("div",{className:"absolute inset-0 bg-[#0000000a]"})]})},p))}),o.length>0&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 md:hidden flex flex-row items-center gap-2",children:Array.from({length:o.length}).map((w,p)=>p===n?e.jsx("div",{className:"size-1.5 bg-[#0006] bg-opacity-80 rounded-[999px]"},p):e.jsx("div",{className:"size-1 bg-[#0003]  rounded-[999px]"},p))})]}),e.jsxs("div",{className:"hidden md:flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-1.5 overflow-auto no-scrollbar",children:o.length>0&&o.map((w,p)=>e.jsxs("div",{className:`relative cursor-pointer flex-shrink-0 rounded-[8px] overflow-hidden size-12 lg:size-16 border-[2px]
                                ${n===p?"border-black":"border-transparent duration-300 hover:border-black"}`,onClick:()=>l(p),children:[e.jsx("img",{src:w,alt:"commodity",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-[#0000000a]"})]},p))}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"cursor-pointer w-11 h-11 grid place-items-center rounded-[999px] bg-white border-neutral-300 border-[1px] duration-300 hover:bg-neutral-300",onClick:()=>{if(n===0){l(h.current-1);return}l(n-1)},children:e.jsx($.LeftArrow,{className:"size-5"})}),e.jsx("div",{className:"cursor-pointer w-11 h-11 grid place-items-center rounded-[999px] bg-white border-neutral-300 border-[1px] duration-300 hover:bg-neutral-300",onClick:()=>{if(n===h.current-1){l(0);return}l(n+1)},children:e.jsx($.RightArrow,{className:"size-5"})})]})]})]})},ue=()=>{var n;const{commodityInfo:r,moreInfoModalOpen:s,openContactModal:t}=b();return e.jsx("div",{className:`absolute right-0 top-[calc(100%+4px)] text-nowrap w-max bg-white p-2 border-[0.5px] border-neutral-100 rounded-2xl 
        shadow-[0px_0px_8px_#00000026] ${s?"":"hidden"}`,onClick:l=>l.stopPropagation(),children:e.jsxs("div",{className:"cursor-pointer flex items-center gap-2 pl-2 pr-3 py-3 hover:bg-neutral-200 rounded-xl duration-300",onClick:t,children:[e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"","data-testid":"icon-shop-chat",stroke:"none",style:{width:"20px",height:"20px"},children:e.jsx("path",{d:"M3.0022 4H21.0022V18H12.0022L7.0022 21V18H3.0022V4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"square",strokeLinejoin:"round"})}),e.jsxs("p",{children:["Contact ",((n=r==null?void 0:r.market)==null?void 0:n.name)||""]})]})})},ge=()=>{const{userLikeList:r={msg:"",data:[]},error:s}=Z(),{commodityInfo:t}=b(),{handleClickLike:n}=K();if(s)return null;const l=r.data.includes((t==null?void 0:t.id)||"");return e.jsx("div",{className:`${l?"bg-[rgb(84_51_235)] hover:bg-[rgb(69_36_219)]":"bg-white hover:bg-neutral-300"} cursor-pointer w-11 h-11 grid place-items-center border-neutral-300 border-[1px] rounded-[999px] duration-300`,onClick:()=>n((t==null?void 0:t.id)||"",l),children:l?e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-text-fixed-light","data-testid":"icon-favorites-filled",stroke:"none",style:{width:"20px",height:"20px"},color:"white",children:e.jsx("path",{d:"M10.9685 5.40212L11.9999 6.45999L13.0315 5.40212C14.8291 3.55859 17.728 3.53299 19.5562 5.32531L19.6328 5.40212C21.4304 7.24565 21.4554 10.2187 19.7077 12.0936L19.6328 12.1722L12 20L4.36718 12.1722C2.54427 10.3027 2.54427 7.27161 4.36718 5.40212C6.1901 3.53263 9.14562 3.53263 10.9685 5.40212Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})}):e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"icon-favorites",stroke:"none",style:{width:"20px",height:"20px"},color:"black",children:e.jsx("path",{d:"M10.7966 4.30255L11.9999 5.53674L13.2034 4.30255C15.3006 2.15177 18.6827 2.1219 20.8156 4.21294L20.905 4.30255C23.0021 6.45334 23.0313 9.92188 20.9923 12.1093L20.905 12.2009L12 21.3334L3.09505 12.2009C0.968317 10.0199 0.968317 6.48363 3.09505 4.30255C5.22178 2.12148 8.6699 2.12148 10.7966 4.30255Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})},we=()=>{const{userLikeList:r={msg:"",data:[]},error:s}=Z(),{commodityInfo:t}=b(),{handleClickLike:n}=K();if(s)return null;const l=r.data.includes((t==null?void 0:t.id)||"");return e.jsx(e.Fragment,{children:l?e.jsxs("div",{children:[e.jsx("div",{className:"relative mt-2 cursor-pointer h-11 rounded-xl text-white bg-[rgb(84_51_235)] duration-200 hover:bg-[rgb(69_36_219)] grid place-items-center",onClick:()=>n((t==null?void 0:t.id)||"",l),children:"Added to favorites"}),e.jsxs("div",{className:"mt-4 font-normal flex gap-2 justify-center",children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"icon-about",stroke:"none",style:{width:"16px",height:"16px",minWidth:"16px",minHeight:"16px"},children:[e.jsx("path",{d:"M11 11H12V16M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("rect",{x:"11.25",y:"7.25",width:"1.5",height:"1.5",rx:"0.75",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.5"})]}),e.jsx("p",{className:"text-[12px]",children:"We will let you know when this is back in stock"})]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"relative mt-2 cursor-pointer h-11 rounded-xl text-white bg-black duration-200 hover:bg-neutral-900 grid place-items-center",onClick:()=>n((t==null?void 0:t.id)||"",l),children:"Add to favorites"}),e.jsxs("div",{className:"mt-4 font-normal flex gap-2",children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"icon-about",stroke:"none",style:{width:"16px",height:"16px",minWidth:"16px",minHeight:"16px"},children:[e.jsx("path",{d:"M11 11H12V16M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("rect",{x:"11.25",y:"7.25",width:"1.5",height:"1.5",rx:"0.75",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.5"})]}),e.jsx("p",{className:"text-[12px]",children:"Adding this product to favorites will notify you when it’s back in stock"})]})]})})},je=()=>{var y,B,z,D,E,L,m;const r=new URLSearchParams(window.location.search).get("id")||"",{data:{data:{bestSellingCommodities:s}}={data:{commodity:null,bestSellingCommodities:[]}}}=F(r),{commodityInfo:t,skuItemMap:n,setImageIndex:l,setImages:o,images:x,skuItemKey:c,setSkuItemKey:h,toggleMoreInfoModalOpen:u,openDescriptionModal:i,openRefundModal:d,openShippingModal:v}=b(),j=g.useMemo(()=>{var a;return((a=n[c])==null?void 0:a.price)||(t==null?void 0:t.price)||0},[t,n,c]),k=g.useMemo(()=>{var a;return((a=n[c])==null?void 0:a.promotingPrice)||(t==null?void 0:t.promotingPrice)||0},[t,n,c]),N=g.useMemo(()=>n[c]!==void 0?n[c].stock:(t==null?void 0:t.stock)||0,[t,n,c]),{updateCartAmountCommodityPage:_,addToCartStatus:M}=J(),[w,p]=g.useState(1);return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("a",{href:`./market?id=${((y=t==null?void 0:t.market)==null?void 0:y.id)||""}`,children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[((B=t==null?void 0:t.market)==null?void 0:B.icon)&&t.market.icon!==""&&e.jsxs("div",{className:"relative w-8 h-8 rounded-lg overflow-hidden",children:[e.jsx("img",{src:t.market.icon,alt:"icon",className:"w-full h-full object-contain"}),e.jsx("div",{className:"absolute inset-0 bg-[#0000000a]"})]}),e.jsx("p",{className:"text-[14px] font-semibold",children:((z=t==null?void 0:t.market)==null?void 0:z.name)||""})]})}),e.jsxs("div",{className:"relative",onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"font-extrabold w-11 h-11 grid place-items-center border-neutral-300 border-[1px] rounded-[999px] cursor-pointer duration-300 hover:bg-neutral-300",onClick:u,children:"···"}),e.jsx(ue,{})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 tracking-[0.15px]",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t==null?void 0:t.name}),e.jsxs("div",{className:"cursor-pointer text-black flex items-center gap-1",children:[e.jsx("div",{className:"flex items-center gap-[1px]",children:Array.from({length:5},(a,f)=>Number(t==null?void 0:t.rating)-f<=0?0:Number(t==null?void 0:t.rating)-f>=1?100:(Number(t==null?void 0:t.rating)-f)*100).map((a,f)=>e.jsxs("div",{className:"relative w-4 h-4",children:[e.jsx("svg",{className:"absolute inset-0",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",fill:"#c9cbcc",children:e.jsx("path",{d:"M9.67642 1.92598C9.55172 1.66566 9.28868 1.5 9.00002 1.5C8.71137 1.5 8.44833 1.66566 8.32363 1.92598L6.34156 6.06361L1.77738 6.66292C1.49045 6.7006 1.2508 6.9 1.16157 7.17529C1.07234 7.45059 1.14945 7.75266 1.35973 7.95149L4.69678 11.107L3.85916 15.6129C3.80636 15.897 3.92143 16.1861 4.15499 16.3563C4.38855 16.5264 4.69905 16.5472 4.95322 16.4098L9.00002 14.2219L13.0468 16.4098C13.301 16.5472 13.6115 16.5264 13.8451 16.3563C14.0786 16.1861 14.1937 15.897 14.1409 15.6129L13.3033 11.107L16.6403 7.95149C16.8506 7.75266 16.9277 7.45059 16.8385 7.17529C16.7493 6.9 16.5096 6.7006 16.2227 6.66292L11.6585 6.06361L9.67642 1.92598Z"})}),e.jsx("svg",{className:"absolute inset-0","data-testid":"review-star",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",clipPath:`polygon(0 0, ${a}% 0, ${a}% 100%, 0 100%)`,children:e.jsx("path",{d:"M9.67642 1.92598C9.55172 1.66566 9.28868 1.5 9.00002 1.5C8.71137 1.5 8.44833 1.66566 8.32363 1.92598L6.34156 6.06361L1.77738 6.66292C1.49045 6.7006 1.2508 6.9 1.16157 7.17529C1.07234 7.45059 1.14945 7.75266 1.35973 7.95149L4.69678 11.107L3.85916 15.6129C3.80636 15.897 3.92143 16.1861 4.15499 16.3563C4.38855 16.5264 4.69905 16.5472 4.95322 16.4098L9.00002 14.2219L13.0468 16.4098C13.301 16.5472 13.6115 16.5264 13.8451 16.3563C14.0786 16.1861 14.1937 15.897 14.1409 15.6129L13.3033 11.107L16.6403 7.95149C16.8506 7.75266 16.9277 7.45059 16.8385 7.17529C16.7493 6.9 16.5096 6.7006 16.2227 6.66292L11.6585 6.06361L9.67642 1.92598Z"})})]},f))}),e.jsxs("p",{className:"text-[12px]",children:["(",t==null?void 0:t.ratingAmount,")"]})]})]}),e.jsx(ge,{})]}),N===0?k!==0?e.jsxs("p",{className:"mt-3 font-semibold",children:[e.jsxs("span",{className:"text-[rgb(111,112,113)] line-through",children:["$",(k/100).toFixed(2)]}),e.jsx("span",{className:"ml-1",children:"Sold Out"})]}):e.jsxs("p",{className:"font-semibold",children:[e.jsxs("span",{className:"text-[rgb(111,112,113)] line-through",children:["$",(j/100).toFixed(2)]}),e.jsx("span",{className:"ml-1",children:"Sold Out"})]}):k!==0?e.jsxs("p",{className:"mt-3 font-semibold",children:[e.jsxs("span",{className:"text-red-600",children:["$",(k/100).toFixed(2)]}),e.jsxs("span",{className:"text-[rgb(111,112,113)] line-through ml-1",children:["$",(j/100).toFixed(2)]})]}):e.jsxs("p",{className:"font-semibold text-black mt-3",children:["$",(j/100).toFixed(2)]}),!!c&&!!(t!=null&&t.skuConfigs)&&t.skuConfigs.map((a,f)=>{var S;return e.jsxs("div",{className:"relative mt-2 font-medium flex h-14 border-b-neutral-300 border-b-[0.5px] items-center justify-between",children:[e.jsx("p",{children:a.key}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("p",{children:[c.split("_")[f],((S=n[c])==null?void 0:S.stock)===0?"(Sold Out)":""]}),e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-text","data-testid":"icon-up-down",style:{width:"24px",height:"24px"},stroke:"none",children:[e.jsx("path",{d:"M9 9.33333L12.3333 6L15.6667 9.33333",stroke:"currentColor",strokeWidth:"1.67",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M15.674 15.3333L12.3208 18.6541L9 15.3333",stroke:"currentColor",strokeWidth:"1.67",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),e.jsx("select",{className:"absolute inset-0 opacity-0",name:a.key,defaultValue:a.defaultValue,onChange:C=>{var W;const O=c.split("_");O[f]=C.target.value;const P=O.join("_");h(P);let A=[];A=[...t.images],A[0]=((W=n[P])==null?void 0:W.image)||"",o(A),l(0)},children:a.value.map(C=>{const O=c.split("_");O[f]=C;const P=O.join("_");return n!=null&&n[P]?(n==null?void 0:n[P].stock)!==0?e.jsx("option",{value:C,children:C},C):e.jsxs("option",{value:C,children:[C,"(Sold out)"]},C):null})})]},f)}),N!==0&&e.jsxs("div",{className:"flex items-center justify-between font-medium mt-3",children:[e.jsx("p",{children:"Quantity"}),e.jsxs("div",{className:"h-8 flex items-center gap-1 bg-neutral-100 rounded-lg",children:[e.jsx("div",{className:"cursor-pointer p-2",onClick:()=>p(a=>a!==1?a-1:a),children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`${w===1?"text-[rgb(201_203_204)]":""}`,"data-testid":"icon-minus-sign",stroke:"none",style:{width:"20px",height:"20px"},children:e.jsx("path",{d:"M7 12H12H17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),e.jsx("div",{className:"w-5 grid place-items-center",children:w}),e.jsx("div",{className:"cursor-pointer p-2",onClick:()=>p(a=>a+1),children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"transition","data-testid":"icon-plus-sign",stroke:"none",style:{width:"20px",height:"20px"},children:e.jsx("path",{d:"M12 7V12M12 12V17M12 12H7M12 12H17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]})]}),N!==0?e.jsxs("div",{children:[e.jsx("div",{className:"relative overflow-hidden mt-6 cursor-pointer h-11 rounded-xl text-white bg-[rgb(84_51_235)] duration-200 hover:bg-[rgb(69_36_219)]",onClick:()=>{var a,f,S;I({market:{id:((a=t==null?void 0:t.market)==null?void 0:a.id)||"",name:((f=t==null?void 0:t.market)==null?void 0:f.name)||"",icon:((S=t==null?void 0:t.market)==null?void 0:S.icon)||""},commodity:{id:(t==null?void 0:t.id)||"",name:(t==null?void 0:t.name)||"",price:j,promotingPrice:k,image:x[0],skuKey:[(t==null?void 0:t.name)||"",c].join("_"),count:w}}),_()},children:e.jsxs("div",{className:"duration-300",style:{translate:M==="success"?"0 -50%":""},children:[e.jsx("div",{className:"h-11 grid place-items-center",children:M==="loading"?e.jsx("svg",{fill:"none",width:"20",height:"20",viewBox:"0 0 52 58",xmlns:"http://www.w3.org/2000/svg",startOffset:"0",strokeDasharray:"0 136",stroke:"white",className:"animate-[addToCart_1.3s_ease-in_infinite]",children:e.jsx("path",{d:"M3 13C5 11.75 10.4968 6.92307 21.5 6.4999C34.5 5.99993 42 13 45 23C48.3 34 42.9211 48.1335 30.5 51C17.5 54 6.6 46 6 37C5.46667 29 10.5 25 14 23",strokeWidth:"12"})}):M==="success"?"":e.jsx("p",{children:"Add to cart"})}),e.jsxs("div",{className:"h-11 flex items-center justify-center gap-1",children:[e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-xxs text-text-fixed-light","data-testid":"icon-checkmark-circle",stroke:"none",style:{width:"24px",height:"24px"},children:e.jsx("path",{d:"M15 9.5L10.5 15L8.5 13M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{children:"Added to cart"})]})]})}),e.jsx("div",{className:"relative mt-2 cursor-pointer h-11 rounded-xl text-white bg-black duration-200 hover:bg-neutral-900 grid place-items-center",children:"Buy now"})]}):e.jsx(we,{}),(t==null?void 0:t.description)&&e.jsxs("div",{className:"mt-6 font-[SuisseIntl-Book,sans-serif] leading-5",children:[e.jsx("p",{className:"font-semibold",children:"Description"}),e.jsx("p",{className:"text-[13px] font-normal",children:t.description.length>250?e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[t.description.slice(0,250),"..."]}),e.jsx("span",{className:"cursor-pointer font-semibold",onClick:i,children:"View More"})]}):t.description})]}),(t==null?void 0:t.officialLink)&&e.jsx("a",{href:t.officialLink,target:"_blank",children:e.jsxs("div",{className:"cursor-pointer mt-3 py-2 text-[14px] flex items-center justify-center gap-2 bg-neutral-100 duration-300 hover:bg-neutral-300 rounded-xl",children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-text","data-testid":"icon-link",stroke:"none",style:{width:"16px",height:"16px"},children:[e.jsx("path",{d:"M17.2206 12.75L17.9706 12C19.6274 10.3431 19.6274 7.65685 17.9706 6V6C16.3137 4.34314 13.6274 4.34314 11.9706 6L11.2206 6.75M12.7206 17.25L11.9706 18C10.3137 19.6568 7.62744 19.6568 5.97059 18V18C4.31374 16.3431 4.31374 13.6568 5.97059 12L6.72059 11.25",stroke:"currentColor",strokeWidth:"1.771",strokeLinecap:"round"}),e.jsx("path",{d:"M14.2207 9.75005L9.72071 14.25",stroke:"currentColor",strokeWidth:"1.771",strokeLinecap:"round"})]}),e.jsxs("span",{children:["More details at ",((D=t.market)==null?void 0:D.name)||""]})]})}),e.jsxs("div",{className:"flex items-center mt-2 gap-2",children:[((E=t==null?void 0:t.market)==null?void 0:E.shippingPolicy)&&e.jsx("div",{className:"cursor-pointer flex-1 py-2 rounded-xl text-[14px] bg-neutral-100 duration-300 hover:bg-neutral-300 grid place-items-center",onClick:v,children:"Shipping Policy"}),((L=t==null?void 0:t.market)==null?void 0:L.refundPolicy)&&e.jsx("div",{className:"cursor-pointer flex-1 py-2 rounded-xl text-[14px] bg-neutral-100 duration-300 hover:bg-neutral-300 grid place-items-center",onClick:d,children:"Refund Policy"})]}),(t==null?void 0:t.market)&&e.jsx("a",{href:`./market?id=${(t==null?void 0:t.market.id)||""}`,children:e.jsxs("div",{className:"relative cursor-pointer mt-8 rounded-xl overflow-hidden border-neutral-300 border-[1px] group/commodityPageMarket",children:[e.jsxs("div",{className:"relative grid grid-cols-4",children:[(s==null?void 0:s.length)>0&&s.slice(0,4).map(a=>{var f;return e.jsx("img",{className:"overflow-hidden aspect-square w-full object-cover",src:(f=a==null?void 0:a.images)==null?void 0:f[0],alt:"commodity"},a.id)}),((m=t==null?void 0:t.market)==null?void 0:m.icon)&&t.market.icon!==""&&e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-11 h-11 rounded-lg overflow-hidden",children:[e.jsx("img",{src:t.market.icon,alt:"icon",className:"w-full h-full object-contain"}),e.jsx("div",{className:"absolute inset-0 bg-[#0000000a]"})]}),e.jsx("div",{className:"absolute inset-0 bg-[#0000000a]"})]}),e.jsxs("div",{className:"flex justify-between p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[14px]",children:t.market.name}),e.jsxs("div",{className:"flex items-center text-[12px] leading-4",children:[e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"!h-[10px] !w-[11px]","data-testid":"icon-star-filled",style:{width:"24px",height:"24px"},stroke:"none",children:e.jsx("path",{d:"M12.9019 1.56798C12.7356 1.22088 12.3849 1 12 1C11.6152 1 11.2644 1.22088 11.0982 1.56798L8.45542 7.08482L2.36984 7.8839C1.98727 7.93413 1.66773 8.2 1.54875 8.56705C1.42978 8.93411 1.5326 9.33687 1.81297 9.60198L6.26237 13.8093L5.14555 19.8172C5.07514 20.196 5.22857 20.5815 5.53998 20.8083C5.85139 21.0351 6.2654 21.0629 6.60429 20.8797L12 17.9625L17.3958 20.8797C17.7347 21.0629 18.1487 21.0351 18.4601 20.8083C18.7715 20.5815 18.9249 20.196 18.8545 19.8172L17.7377 13.8093L22.1871 9.60198C22.4675 9.33687 22.5703 8.93411 22.4513 8.56705C22.3323 8.2 22.0128 7.93413 21.6302 7.8839L15.5446 7.08482L12.9019 1.56798Z",fill:"currentColor"})}),e.jsx("p",{children:t.market.rating}),e.jsxs("p",{className:"ml-1",children:["(",t.market.ratingAmount,")"]})]})]}),e.jsx("div",{className:"relative z-10 bg-black text-white rounded-lg text-[14px] w-[88px] grid place-items-center",onClick:a=>a.preventDefault(),children:"Follow"})]}),e.jsx("div",{className:"absolute inset-0 bg-[#0000001a] opacity-0 duration-300 group-hover/commodityPageMarket:opacity-100"})]})})]})},fe=()=>{const{commodityInfo:r,comment:s,openCommentModal:t}=b();return e.jsxs("div",{className:"md:hidden p-4 font-[SuisseIntl-Book,sans-serif] font-normal",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"text-[18px] mr-4",children:"Reviews"}),e.jsxs("div",{className:"cursor-pointer text-black flex items-center gap-1",children:[e.jsx(R,{size:18,rating:Number((r==null?void 0:r.rating)||0),gap:2}),e.jsxs("p",{className:"text-[14px]",children:[r==null?void 0:r.rating,e.jsxs("span",{className:"text-neutral-500 ml-1",children:["(",r==null?void 0:r.ratingAmount,")"]})]})]})]}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:s.slice(0,4).map((n,l)=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(R,{size:16,rating:n.rating,gap:2}),e.jsxs("p",{className:"text-[12px] text-[rgb(111_112_113)]",children:[n.userName," · ",H(new Date(n.createdAt))]}),e.jsx("p",{className:"text-[14px] text-black",children:n.comment.length>60?n.comment.slice(0,60)+"...":n.comment})]},l))}),s.length>4&&e.jsx("div",{className:"cursor-pointer bg-[rgb(242_244_245)] mt-4 duration-300 hover:bg-[rgb(225_228_229)] rounded-lg p-2 grid place-items-center",onClick:t,children:"Read more reviews"})]})},ve=()=>{const{imageModalOpen:r,commodityInfoImageLength:s,setImageModalOpen:t,imageIndex:n,setImageIndex:l,images:o}=b(),[x,c]=g.useState(!0);return e.jsxs("div",{className:`overflow-scroll select-none fixed z-50 inset-0 touch-none bg-white ${r?"":"hidden"} ${x?"md:cursor-zoom-in":"md:cursor-zoom-out"}`,onClick:()=>{window.innerWidth>=768&&c(h=>!h)},children:[e.jsx("img",{src:o[n],alt:"commodity",className:`${x?"w-full h-full object-contain":"w-full"}`}),e.jsx("div",{className:"cursor-pointer absolute right-10 top-10 w-10 h-10 grid place-items-center rounded-[999px] bg-neutral-400",onClick:h=>{h.stopPropagation(),t(!1)},children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"icon-cross",stroke:"none",color:"white",style:{width:"24px",height:"24px"},children:e.jsx("path",{d:"M5 5L19 19M19 5L5 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),e.jsxs("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-10 flex gap-1",children:[e.jsx("div",{className:"cursor-pointer w-11 h-11 grid place-items-center rounded-[999px] bg-neutral-400 duration-300 hover:bg-neutral-500",onClick:h=>{h.stopPropagation(),n!==0&&l(n-1)},children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",color:"white",xmlns:"http://www.w3.org/2000/svg","data-testid":"icon-left-chevron",stroke:"none",style:{width:"20px",height:"20px"},children:e.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"cursor-pointer w-11 h-11 grid place-items-center rounded-[999px] bg-neutral-400 duration-300 hover:bg-neutral-500",onClick:h=>{h.stopPropagation(),n!==s-1&&l(n+1)},children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"white","data-testid":"icon-right-chevron",stroke:"none",style:{width:"20px",height:"20px"},children:e.jsx("path",{d:"M9 6L15 12L9 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})},be=()=>{const{closeDescriptionModal:r,descriptionModalOpen:s,commodityInfo:t}=b(),n=(t==null?void 0:t.description)||"";return e.jsx("div",{className:`hidden md:block fixed left-0 top-0 w-screen h-screen z-50 bg-[#0006]
        ${s?"opacity-100 duration-300":"opacity-0 pointer-events-none"}`,onClick:l=>{l.stopPropagation(),r()},children:e.jsxs("div",{className:`w-[640px] max-w-full h-[400px] tracking-[.15px] bg-white rounded-3xl absolute left-1/2 top-1/2 -translate-x-1/2
            ${s?"scale-100 opacity-100 -translate-y-1/2":"scale-90 -translate-y-[40%] opacity-0"} duration-300 ease-[cubic-bezier(.16,1,.3,1)]`,onClick:l=>l.stopPropagation(),children:[e.jsx("h1",{className:"p-5 text-[20px] font-semibold text-center",children:"Description"}),e.jsx("div",{className:"px-5 pt-2 text-[14px] font-normal",children:n}),e.jsx("button",{type:"button",className:"absolute top-5 right-5",onClick:r,children:e.jsx($.Close,{className:"size-6 text-neutral-500"})})]})})},ke=()=>{const{closeDescriptionModal:r,descriptionModalOpen:s,commodityInfo:t}=b(),n=(t==null?void 0:t.description)||"";return e.jsxs("div",{className:`md:hidden fixed inset-0 z-[100] bg-white flex flex-col
        ${s?"opacity-100 duration-300":"opacity-0 pointer-events-none"}`,onClick:l=>{l.stopPropagation()},children:[e.jsx("p",{className:"p-5 text-[20px] text-center",children:"Description"}),e.jsx("div",{className:"px-5 pt-2 text-[14px] font-normal",children:n}),e.jsx("button",{type:"button",className:"absolute top-5 right-5",onClick:r,children:e.jsx($.Close,{className:"size-6 text-neutral-500"})})]})},q=()=>e.jsxs("div",{className:"mt-6 border-b-neutral-300 pb-6 border-b-[0.5px] flex flex-col gap-3",children:[e.jsx(R,{size:16,rating:0,gap:2}),e.jsx("div",{className:"bg-neutral-100 w-16 h-4"}),e.jsx("div",{className:"bg-neutral-100 w-28 h-4"})]}),Ne=()=>{const{comment:r,commentHasMore:s,commentModalOpen:t,closeCommentModal:n,addCommentPage:l,commodityInfo:o,commentGroup:x,commentTotalAmount:c}=b(),h=g.useMemo(()=>{if(x.length<=0)return{};const i=x.map(d=>[d.rating,d._count]);return Object.fromEntries(i)},[x]),u=g.useRef(null);return g.useEffect(()=>{var v;let i=!1;const d=()=>{i||!s||(i=!0,setTimeout(()=>{var j,k,N;i=!1,(((j=u.current)==null?void 0:j.scrollHeight)||0)-(((k=u.current)==null?void 0:k.scrollTop)||0)-(((N=u.current)==null?void 0:N.clientHeight)||0)<=120.5*3&&l()},500))};return(v=u.current)==null||v.addEventListener("scroll",d),()=>{var j;return(j=u.current)==null?void 0:j.removeEventListener("scroll",d)}},[s]),e.jsx("div",{className:`hidden md:block fixed left-0 top-0 w-screen h-screen z-50 bg-[#0006]
        ${t?"opacity-100 duration-300":"opacity-0 pointer-events-none"}`,onClick:i=>{i.stopPropagation(),n()},children:e.jsxs("div",{className:`w-[640px] max-w-full h-4/5 bg-white rounded-3xl absolute left-1/2 top-1/2 -translate-x-1/2
            ${t?"scale-100 -translate-y-1/2":"scale-90 -translate-y-[40%]"} duration-300`,onClick:i=>i.stopPropagation(),children:[e.jsx("h1",{className:"p-5 text-[20px] font-medium text-center",children:"Ratings and reviews"}),e.jsxs("div",{ref:u,className:"px-5 h-[calc(100%-70px)] overflow-auto",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("div",{className:"bg-[rgb(242,244,245)] p-4 rounded-l-[12px]",children:[e.jsx("p",{className:"text-[14px] font-medium",children:"Average rating"}),e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx("p",{className:"text-[36px]",children:((o==null?void 0:o.rating)||"")+" "}),e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-m",stroke:"none",style:{width:"24px",height:"24px"},children:e.jsx("path",{d:"M12.9019 1.56798C12.7356 1.22088 12.3849 1 12 1C11.6152 1 11.2644 1.22088 11.0982 1.56798L8.45542 7.08482L2.36984 7.8839C1.98727 7.93413 1.66773 8.2 1.54875 8.56705C1.42978 8.93411 1.5326 9.33687 1.81297 9.60198L6.26237 13.8093L5.14555 19.8172C5.07514 20.196 5.22857 20.5815 5.53998 20.8083C5.85139 21.0351 6.2654 21.0629 6.60429 20.8797L12 17.9625L17.3958 20.8797C17.7347 21.0629 18.1487 21.0351 18.4601 20.8083C18.7715 20.5815 18.9249 20.196 18.8545 19.8172L17.7377 13.8093L22.1871 9.60198C22.4675 9.33687 22.5703 8.93411 22.4513 8.56705C22.3323 8.2 22.0128 7.93413 21.6302 7.8839L15.5446 7.08482L12.9019 1.56798Z",fill:"currentColor"})})]}),e.jsxs("p",{className:"text-[12px] text-[rgb(111_112_113)]",children:[Number((o==null?void 0:o.ratingAmount)||0)*3," ratings"]})]}),e.jsx("div",{className:"bg-[rgb(242,244,245)] flex-1 p-4 grid grid-rows-5 items-center rounded-r-[12px]",children:Array.from({length:5},(i,d)=>5-d).map(i=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("p",{className:"text-[10px]",children:i}),e.jsx("div",{className:"flex-1 h-2 rounded-[8px] overflow-hidden bg-white",children:e.jsx("div",{className:"bg-black h-full rounded-[8px] delay-500",style:{width:t?((h==null?void 0:h[i])||0)/c*100+"%":0,transitionDuration:t?"700ms":"0ms"}})})]},i))})]}),e.jsxs("div",{className:"mt-8 font-medium flex flex-row gap-1 text-[14px]",children:[e.jsx("p",{children:"Reviews"}),e.jsxs("span",{className:"text-[rgb(111_112_113)]",children:["(",(o==null?void 0:o.ratingAmount)||0,")"]})]}),r.map((i,d)=>e.jsxs("div",{className:"mt-6 border-b-neutral-300 pb-6 border-b-[0.5px] font-normal",children:[e.jsx(R,{size:16,rating:i.rating,gap:2}),e.jsxs("p",{className:"text-[12px] text-[rgb(111_112_113)]",children:[i.userName," · ",H(new Date(i.createdAt))]}),e.jsx("p",{className:"mt-4 text-[14px]",children:i.comment})]},d)),s&&Array.from({length:3},(i,d)=>d).map(i=>e.jsx(q,{},i))]}),e.jsx("button",{type:"button",className:"absolute top-5 right-5",onClick:n,children:e.jsx($.Close,{className:"size-6"})})]})})},Ce=()=>{const{comment:r,commentHasMore:s,commentModalOpen:t,closeCommentModal:n,addCommentPage:l,commodityInfo:o,commentGroup:x,commentTotalAmount:c}=b(),h=g.useMemo(()=>{if(x.length<=0)return{};const i=x.map(d=>[d.rating,d._count]);return Object.fromEntries(i)},[x]),u=g.useRef(null);return g.useEffect(()=>{var v;let i=!1;const d=()=>{i||!s||(i=!0,setTimeout(()=>{i=!1,u.current&&u.current.scrollHeight-u.current.scrollTop-u.current.clientHeight<=120.5*3&&l()},500))};return(v=u.current)==null||v.addEventListener("scroll",d),()=>{var j;return(j=u.current)==null?void 0:j.removeEventListener("scroll",d)}},[s]),e.jsxs("div",{className:`touch-none md:hidden fixed inset-0 z-[100] bg-white flex flex-col
        ${t?"opacity-100 duration-300":"opacity-0 pointer-events-none"}`,onClick:i=>{i.stopPropagation()},children:[e.jsx("h1",{className:"p-5 text-[20px] font-medium text-center",children:"Ratings and reviews"}),e.jsxs("div",{ref:u,className:"px-5 overflow-auto",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("div",{className:"bg-[rgb(242,244,245)] p-4 rounded-l-[12px]",children:[e.jsx("p",{className:"text-[14px] font-medium",children:"Average rating"}),e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx("p",{className:"text-[36px]",children:((o==null?void 0:o.rating)||"")+" "}),e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-m",stroke:"none",style:{width:"24px",height:"24px"},children:e.jsx("path",{d:"M12.9019 1.56798C12.7356 1.22088 12.3849 1 12 1C11.6152 1 11.2644 1.22088 11.0982 1.56798L8.45542 7.08482L2.36984 7.8839C1.98727 7.93413 1.66773 8.2 1.54875 8.56705C1.42978 8.93411 1.5326 9.33687 1.81297 9.60198L6.26237 13.8093L5.14555 19.8172C5.07514 20.196 5.22857 20.5815 5.53998 20.8083C5.85139 21.0351 6.2654 21.0629 6.60429 20.8797L12 17.9625L17.3958 20.8797C17.7347 21.0629 18.1487 21.0351 18.4601 20.8083C18.7715 20.5815 18.9249 20.196 18.8545 19.8172L17.7377 13.8093L22.1871 9.60198C22.4675 9.33687 22.5703 8.93411 22.4513 8.56705C22.3323 8.2 22.0128 7.93413 21.6302 7.8839L15.5446 7.08482L12.9019 1.56798Z",fill:"currentColor"})})]}),e.jsxs("p",{className:"text-[12px] text-[rgb(111_112_113)]",children:[Number((o==null?void 0:o.ratingAmount)||0)*3," ratings"]})]}),e.jsx("div",{className:"bg-[rgb(242,244,245)] flex-1 p-4 grid grid-rows-5 items-center rounded-r-[12px]",children:Array.from({length:5},(i,d)=>5-d).map(i=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("p",{className:"text-[10px]",children:i}),e.jsx("div",{className:"flex-1 h-2 rounded-[8px] overflow-hidden bg-white",children:e.jsx("div",{className:"bg-black h-full rounded-[8px] delay-500",style:{width:t?((h==null?void 0:h[i])||0)/c*100+"%":0,transitionDuration:t?"700ms":"0ms"}})})]},i))})]}),e.jsxs("div",{className:"mt-8 font-medium flex flex-row gap-1 text-[14px]",children:[e.jsx("p",{children:"Reviews"}),e.jsxs("span",{className:"text-[rgb(111_112_113)]",children:["(",(o==null?void 0:o.ratingAmount)||0,")"]})]}),r.map((i,d)=>e.jsxs("div",{className:"mt-6 border-b-neutral-300 pb-6 border-b-[0.5px] font-normal",children:[e.jsx(R,{size:16,rating:i.rating,gap:2}),e.jsxs("p",{className:"text-[12px] text-[rgb(111_112_113)]",children:[i.userName," · ",H(new Date(i.createdAt))]}),e.jsx("p",{className:"mt-4 text-[14px]",children:i.comment})]},d)),s&&Array.from({length:3},(i,d)=>d).map(i=>e.jsx(q,{},i))]}),e.jsx("button",{type:"button",className:"absolute top-5 right-5",onClick:n,children:e.jsx($.Close,{className:"size-6 text-neutral-500"})})]})},Le=()=>{var p,y,B,z,D,E;const r=new URLSearchParams(window.location.search).get("id")||"",{data:{data:s}={data:{commodity:null,bestSellingCommodities:[]}}}=F(r),{setCommodityInfo:t,setCommodityInfoImageLength:n,setImages:l,setSkuItemMap:o,setSkuItemKey:x,comment:c,setComment:h,setCommentHasMore:u,setCommentTotalAmount:i,setCommentGroup:d,commentPage:v,contactModalOpen:j,closeContactModal:k,refundModalOpen:N,closeRefundModal:_,shippingModalOpen:M,closeShippingModal:w}=b();return g.useEffect(()=>{var f,S,C,O,P,A,W,U;const L=s.commodity?Object.fromEntries((f=s.commodity)==null?void 0:f.skuItems.map(T=>{var G;return[(G=s.commodity)==null?void 0:G.skuConfigs.map(X=>T.sku[X.key]||X.defaultValue).join("_"),T]})):{};o(L);const m=((O=(C=(S=s.commodity)==null?void 0:S.skuConfigs)==null?void 0:C.map(T=>T.defaultValue))==null?void 0:O.join("_"))||"";x(m);let a=[];s.commodity?((P=s.commodity)==null?void 0:P.skuItems.length)===0?a=[...s.commodity.images]:(a=[...s.commodity.images],a[0]=((A=L[m])==null?void 0:A.image)||""):a=[],l(a),t(s.commodity),n(((W=s.commodity)==null?void 0:W.images.length)||1),l(((U=s.commodity)==null?void 0:U.images)||[])},[s.commodity]),g.useEffect(()=>{let L=!1;return fetch(`https://shop-backend-production-3600.up.railway.app/api/comment?pageSize=6&page=${v}&commodityId=${r}`).then(m=>m.json()).then(m=>{L||(v===1?(h((m==null?void 0:m.data)||[]),u((m==null?void 0:m.hasMore)||!1),i((m==null?void 0:m.totalAmount)||0),d((m==null?void 0:m.groupRating)||[])):(h([...c,...(m==null?void 0:m.data)||[]]),u((m==null?void 0:m.hasMore)||!1)))}).catch(m=>console.log(m)),()=>{L=!0}},[v,r]),g.useEffect(()=>{var L,m;s.commodity&&ee({id:(L=s.commodity)==null?void 0:L.id,name:(m=s.commodity)==null?void 0:m.name,image:s.commodity.images[0],price:s.commodity.price,promotingPrice:s.commodity.promotingPrice})},[s.commodity]),e.jsxs("div",{className:"max-w-[1144px] mx-auto md:px-4 md:mt-4 font-[SuisseIntl-Medium,sans-serif] font-medium select-none flex flex-col md:flex-row gap-4 md:gap-10",children:[e.jsxs("div",{className:"md:flex-1 overflow-hidden",children:[e.jsx(pe,{}),e.jsx(he,{})]}),e.jsx("div",{className:"md:flex-[0_0_344px] px-4 md:px-0",children:e.jsx(je,{})}),e.jsx(fe,{}),e.jsx(ve,{}),e.jsx(ne,{data:((p=s.commodity)==null?void 0:p.market)||null,modalOpen:j,closeModal:k}),e.jsx(ie,{data:((y=s.commodity)==null?void 0:y.market)||null,modalOpen:j,closeModal:k}),e.jsx(le,{data:((B=s.commodity)==null?void 0:B.market)||null,modalOpen:N,closeModal:_}),e.jsx(ae,{data:((z=s.commodity)==null?void 0:z.market)||null,modalOpen:N,closeModal:_}),e.jsx(oe,{data:((D=s.commodity)==null?void 0:D.market)||null,modalOpen:M,closeModal:w}),e.jsx(ce,{data:((E=s.commodity)==null?void 0:E.market)||null,modalOpen:M,closeModal:w}),e.jsx(be,{}),e.jsx(ke,{}),e.jsx(Ne,{}),e.jsx(Ce,{})]})},Me=()=>{var o,x;const r=new URLSearchParams(window.location.search).get("id")||"",{data:{data:{commodity:s,bestSellingCommodities:t}}={data:{commodity:null,bestSellingCommodities:[]}}}=F(r),{userLikeList:n={msg:"",data:[]}}=Z(),{handleClickLike:l}=K();return e.jsxs("div",{className:"mt-20 mb-10 max-w-[1240px] mx-auto px-4 font-[SuisseIntl-Medium,sans-serif] font-medium",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[((o=s==null?void 0:s.market)==null?void 0:o.icon)&&s.market.icon!==""&&e.jsxs("div",{className:"relative w-11 h-11 rounded-lg overflow-hidden",children:[e.jsx("img",{src:s.market.icon,alt:"icon",className:"w-full h-full object-contain"}),e.jsx("div",{className:"absolute inset-0 bg-[#0000000a]"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[14px]",children:((x=s==null?void 0:s.market)==null?void 0:x.name)||""}),e.jsx("p",{className:"text-[20px]",children:"Best sellers"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 md:gap-4 mt-3 md:mt-6",children:t.length>0&&t.map((c,h)=>{var u;return e.jsx(de,{...c,image:c.images[0],checked:(u=n==null?void 0:n.data)==null?void 0:u.includes(c.id),handleClickLike:l},h)})})]})},ye=()=>{const r=new URLSearchParams(window.location.search).get("id"),{closeAllModal:s}=b();return g.useEffect(()=>(window.addEventListener("click",s),()=>window.removeEventListener("click",s)),[]),r===null?e.jsx("div",{className:"text-center text-5xl mt-6",children:"404 id not found"}):e.jsxs(me,{children:[e.jsx(Le,{}),e.jsx(Me,{})]})};te.createRoot(document.getElementById("root")).render(e.jsx(se.StrictMode,{children:e.jsx(ye,{})}));
